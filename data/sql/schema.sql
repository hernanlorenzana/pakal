CREATE TABLE banco (id INT AUTO_INCREMENT, nombre_banco VARCHAR(45), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE estado (id INT AUTO_INCREMENT, nombre VARCHAR(45), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE estado_tarea (id INT AUTO_INCREMENT, nombre VARCHAR(45), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE etapa (id INT AUTO_INCREMENT, nombre VARCHAR(45), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE historial (fk_planta INT NOT NULL, litraje INT, temperatura DECIMAL(11, 2), altura DECIMAL(11, 2), fk_tipo_cultivo INT NOT NULL, hora_luz INT, hora_oscuridad INT, humedad DECIMAL(11, 2), ph DECIMAL(11, 2), fk_estado INT NOT NULL, fk_etapa INT NOT NULL, id INT AUTO_INCREMENT, fk_luz INT NOT NULL, fecha DATE NOT NULL, INDEX fk_estado_idx (fk_estado), INDEX fk_etapa_idx (fk_etapa), INDEX fk_luz_idx (fk_luz), INDEX fk_planta_idx (fk_planta), INDEX fk_tipo_cultivo_idx (fk_tipo_cultivo), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE localidad (id INT, nombre VARCHAR(150) NOT NULL, x FLOAT(13, 10) DEFAULT 0.0000000000 NOT NULL, y FLOAT(13, 10) DEFAULT 0.0000000000 NOT NULL, fk_region INT NOT NULL, INDEX fk_region_idx (fk_region), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE luz (id INT AUTO_INCREMENT, fk_tipo_luz INT NOT NULL, fk_pot_luz INT NOT NULL, fk_usuario INT NOT NULL, INDEX fk_pot_luz_idx (fk_pot_luz), INDEX fk_tipo_luz_idx (fk_tipo_luz), INDEX fk_usuario_idx (fk_usuario), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE pais (id INT, nombre VARCHAR(150) NOT NULL, x FLOAT(13, 10) DEFAULT 0.0000000000 NOT NULL, y FLOAT(13, 10) DEFAULT 0.0000000000 NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE planta (id INT AUTO_INCREMENT, nombre VARCHAR(100), fk_usuario INT NOT NULL, fk_semilla INT NOT NULL, fecha_nacimiento DATE, madre VARCHAR(100), esqueje TINYINT NOT NULL, INDEX fk_semilla_idx (fk_semilla), INDEX fk_usuario_idx (fk_usuario), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE pot_luz (id INT AUTO_INCREMENT, potencia INT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE region (id INT, nombre VARCHAR(150) NOT NULL, x FLOAT(13, 10) DEFAULT 0.0000000000 NOT NULL, y FLOAT(13, 10) DEFAULT 0.0000000000 NOT NULL, fk_pais INT NOT NULL, INDEX fk_pais_idx (fk_pais), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE semilla (id INT AUTO_INCREMENT, nombre_semilla VARCHAR(45), fk_banco INT, INDEX fk_banco_idx (fk_banco), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE tarea (id INT AUTO_INCREMENT, fecha_inicio DATE NOT NULL, fecha_final DATE, periodisidad INT, fk_id_planta INT NOT NULL, fk_id_estado_tarea INT NOT NULL, fk_id_tipo_tarea INT NOT NULL, INDEX fk_id_estado_tarea_idx (fk_id_estado_tarea), INDEX fk_id_planta_idx (fk_id_planta), INDEX fk_id_tipo_tarea_idx (fk_id_tipo_tarea), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE tipo_cultivo (id INT AUTO_INCREMENT, nombre_cultivo VARCHAR(45), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE tipo_luz (id INT AUTO_INCREMENT, nombre VARCHAR(45), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE tipotarea (id INT AUTO_INCREMENT, nombre VARCHAR(45), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE usuario (id INT AUTO_INCREMENT, nombre VARCHAR(45), apellido VARCHAR(45), nick VARCHAR(45), email VARCHAR(45), fk_localidad INT NOT NULL, INDEX fk_localidad_idx (fk_localidad), PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE historial ADD CONSTRAINT historial_fk_tipo_cultivo_tipo_cultivo_id FOREIGN KEY (fk_tipo_cultivo) REFERENCES tipo_cultivo(id);
ALTER TABLE historial ADD CONSTRAINT historial_fk_planta_planta_id FOREIGN KEY (fk_planta) REFERENCES planta(id);
ALTER TABLE historial ADD CONSTRAINT historial_fk_luz_luz_id FOREIGN KEY (fk_luz) REFERENCES luz(id);
ALTER TABLE historial ADD CONSTRAINT historial_fk_etapa_etapa_id FOREIGN KEY (fk_etapa) REFERENCES etapa(id);
ALTER TABLE historial ADD CONSTRAINT historial_fk_estado_estado_id FOREIGN KEY (fk_estado) REFERENCES estado(id);
ALTER TABLE localidad ADD CONSTRAINT localidad_fk_region_region_id FOREIGN KEY (fk_region) REFERENCES region(id);
ALTER TABLE luz ADD CONSTRAINT luz_fk_usuario_usuario_id FOREIGN KEY (fk_usuario) REFERENCES usuario(id);
ALTER TABLE luz ADD CONSTRAINT luz_fk_tipo_luz_tipo_luz_id FOREIGN KEY (fk_tipo_luz) REFERENCES tipo_luz(id);
ALTER TABLE luz ADD CONSTRAINT luz_fk_pot_luz_pot_luz_id FOREIGN KEY (fk_pot_luz) REFERENCES pot_luz(id);
ALTER TABLE planta ADD CONSTRAINT planta_fk_usuario_usuario_id FOREIGN KEY (fk_usuario) REFERENCES usuario(id);
ALTER TABLE planta ADD CONSTRAINT planta_fk_semilla_semilla_id FOREIGN KEY (fk_semilla) REFERENCES semilla(id);
ALTER TABLE region ADD CONSTRAINT region_fk_pais_pais_id FOREIGN KEY (fk_pais) REFERENCES pais(id);
ALTER TABLE semilla ADD CONSTRAINT semilla_fk_banco_banco_id FOREIGN KEY (fk_banco) REFERENCES banco(id);
ALTER TABLE tarea ADD CONSTRAINT tarea_fk_id_tipo_tarea_tipotarea_id FOREIGN KEY (fk_id_tipo_tarea) REFERENCES tipotarea(id);
ALTER TABLE tarea ADD CONSTRAINT tarea_fk_id_planta_planta_id FOREIGN KEY (fk_id_planta) REFERENCES planta(id);
ALTER TABLE tarea ADD CONSTRAINT tarea_fk_id_estado_tarea_estado_tarea_id FOREIGN KEY (fk_id_estado_tarea) REFERENCES estado_tarea(id);
ALTER TABLE usuario ADD CONSTRAINT usuario_fk_localidad_localidad_id FOREIGN KEY (fk_localidad) REFERENCES localidad(id);
